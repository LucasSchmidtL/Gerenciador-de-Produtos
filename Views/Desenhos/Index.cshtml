@model IEnumerable<Gerenciador_de_Produtos.Models.Desenho>

@{
    ViewData["Title"] = "Desenhos";
}

<h1 class="display-4 text-center mb-5 text-primary">
    <i class="bi bi-pencil-square me-2"></i>@ViewData["Title"]
</h1>

<div class="mb-3 d-flex justify-content-between align-items-center">
    <a asp-action="Create" class="btn btn-success">
        <i class="bi bi-plus-lg me-1"></i>Criar Novo
    </a>
    <input id="searchInput" type="text" class="form-control ms-3" placeholder="Buscar Nome ou Descrição..." style="max-width:300px;" />
</div>

<table class="table table-striped table-hover">
    <thead class="table-dark">
        <tr>
            <th>@Html.DisplayNameFor(m => m.First().Nome)</th>
            <th>@Html.DisplayNameFor(m => m.First().Descricao)</th>
            <th>@Html.DisplayNameFor(m => m.First().Revisao)</th>
            <th>@Html.DisplayNameFor(m => m.First().Status)</th>
            <th>@Html.DisplayNameFor(m => m.First().Classificacao)</th>
            <th>@Html.DisplayNameFor(m => m.First().SolicitacaoAlteracaoId)</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr data-filter="@(item.Nome + " " + item.Descricao).ToLower()">
                <td>@item.Nome</td>
                <td>@item.Descricao</td>
                <td>@item.Revisao</td>
                <td>@item.Status</td>
                <td>@item.Classificacao</td>
                <td>@item.SolicitacaoAlteracaoId</td>
                <td>
                    <a asp-action="Details" asp-route-id="@item.DesenhoId" class="btn btn-sm btn-info me-1">
                        <i class="bi bi-eye"></i>
                    </a>
                    <a asp-action="Edit" asp-route-id="@item.DesenhoId" class="btn btn-sm btn-secondary me-1">
                        <i class="bi bi-pencil"></i>
                    </a>
                    <a asp-action="Delete" asp-route-id="@item.DesenhoId" class="btn btn-sm btn-danger">
                        <i class="bi bi-trash"></i>
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>

@section Scripts {
    <script>
        document.getElementById('searchInput').addEventListener('input', function() {
            var filter = this.value.toLowerCase();
            document.querySelectorAll('table tbody tr').forEach(function(row) {
                var data = row.getAttribute('data-filter') || '';
                row.style.display = data.includes(filter) ? '' : 'none';
            });
        });
    </script>
}
